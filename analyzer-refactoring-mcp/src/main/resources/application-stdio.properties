# Spring AI MCP Server Configuration - STDIO Only Mode
spring.application.name=java-refactoring-mcp

# Disable web server for STDIO mode
spring.main.web-application-type=none

# Bedrock credentials (required for bean initialization)
# Use environment variables for security: AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY
spring.ai.bedrock.aws.region=${AWS_REGION:us-east-1}
spring.ai.bedrock.aws.access-key=${AWS_ACCESS_KEY_ID:}
spring.ai.bedrock.aws.secret-key=${AWS_SECRET_ACCESS_KEY:}
spring.ai.bedrock.cohere.embedding.enabled=true
spring.ai.bedrock.cohere.titan.enabled=true
spring.ai.bedrock.aws.timeout=10m
spring.ai.bedrock.converse.chat.options.model=global.anthropic.claude-sonnet-4-20250514-v1:0
spring.ai.bedrock.converse.chat.options.temperature=0.8
spring.ai.bedrock.converse.chat.options.top-k=15

# Disable web MVC and Bedrock auto-configurations
# Note: MCP refactoring tools don't use AI models - they use Eclipse JDT for code transformation
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\
  org.springframework.ai.model.bedrock.cohere.autoconfigure.BedrockCohereEmbeddingAutoConfiguration,\
  org.springframework.ai.model.bedrock.titan.autoconfigure.BedrockTitanChatAutoConfiguration,\
  org.springframework.ai.model.bedrock.titan.autoconfigure.BedrockTitanEmbeddingAutoConfiguration,\
  org.springframework.ai.model.bedrock.llama.autoconfigure.BedrockLlamaChatAutoConfiguration,\
  org.springframework.ai.model.bedrock.jurassic2.autoconfigure.BedrockAi21Jurassic2ChatAutoConfiguration,\
  org.springframework.ai.model.bedrock.converse.autoconfigure.BedrockProxyChatAutoConfiguration,\
  org.springframework.ai.model.bedrock.converse.autoconfigure.BedrockConverseProxyChatAutoConfiguration,\
  org.springframework.ai.model.bedrock.anthropic.autoconfigure.BedrockAnthropicChatAutoConfiguration,\
  org.springframework.ai.model.bedrock.anthropic3.autoconfigure.BedrockAnthropic3ChatAutoConfiguration

# MCP Server Settings
spring.ai.mcp.server.name=java-refactoring-mcp
spring.ai.mcp.server.version=1.0.0
spring.ai.mcp.server.stdio=true
spring.ai.mcp.server.protocol=SYNC

# MCP Server Instructions
spring.ai.mcp.server.instructions=This MCP server provides comprehensive Java refactoring capabilities using Eclipse JDT. \
  It supports 14 refactoring operations: rename (10 variants), move (2 variants), copy, and delete. \
  All operations validate inputs and provide detailed feedback. Currently running in simulation mode.

# MCP Capabilities
spring.ai.mcp.server.capabilities.tool=true
spring.ai.mcp.server.capabilities.resource=false
spring.ai.mcp.server.capabilities.prompt=false
spring.ai.mcp.server.capabilities.completion=false
spring.ai.mcp.server.enabled=true

# Change Notifications
spring.ai.mcp.server.tool-change-notification=true

# Logging Configuration - Minimal logging for stdio mode
logging.level.root=WARN
logging.level.com.analyzer.refactoring=ERROR
logging.level.org.springframework.ai.mcp=ERROR

# Disable banner and reduce console output for clean stdio communication
spring.main.banner-mode=off
logging.pattern.console=

# Write logs to file instead of stdout to avoid interfering with MCP protocol
logging.file.name=./logs/mcp-server.log

# Groovy Script Generation via Bedrock
groovy.bedrock.model=global.anthropic.claude-sonnet-4-20250514-v1:0
groovy.bedrock.temperature=0.1
groovy.bedrock.top-k=10
groovy.bedrock.max-tokens=4000
groovy.bedrock.max-retries=3
groovy.bedrock.timeout.seconds=60
groovy.bedrock.aws.region=us-east-1
groovy.bedrock.aws.access-key=${spring.ai.bedrock.aws.access-key}
groovy.bedrock.aws.secret-key=${spring.ai.bedrock.aws.secret-key}

# Groovy Script Execution
groovy.script.timeout.seconds=30
groovy.script.max-memory-mb=512

# Groovy Script Cache
groovy.cache.enabled=true
groovy.cache.max-size=100
groovy.cache.expire-after-write-minutes=60
groovy.cache.record-stats=true

# Pattern Matcher Agent (AI semantic matching)
pattern.matcher.model=global.anthropic.claude-sonnet-4-20250514-v1:0
pattern.matcher.temperature=0.0
pattern.matcher.confidence-threshold=80
pattern.matcher.enabled=true
